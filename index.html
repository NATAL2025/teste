<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contador Dias √öteis</title>
<style>
body{
    font-family: Arial, sans-serif;
    background:#f7f7f7;
    padding:20px;
}
.container{
    background:#fff;
    padding:20px;
    border-radius:6px;
    max-width:500px;
    margin:auto;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}
input,button{
    padding:10px;
    width:100%;
    margin-top:10px;
}
#resultado{
    margin-top:20px;
    font-size:18px;
    font-weight:bold;
}
</style>
</head>
<body>
<div class="container">
    <h2>Calculadora de Dias √öteis</h2>

    <form id="formulario">
        <label>Data de In√≠cio:</label>
        <input type="date" id="dataInicio" required>

        <label>Data de Fim:</label>
        <input type="date" id="dataFim" required>

        <button type="submit">Calcular</button>
    </form>

    <div id="resultado"></div>
</div>

<script type="module">
const dataInicioEl = document.getElementById("dataInicio");
const dataFimEl = document.getElementById("dataFim");
const resultadoEl = document.getElementById("resultado");
const form = document.getElementById("formulario");

const feriados = [
    "2025-04-25",
    "2025-04-18",
    "2025-05-01",
    "2025-12-25", // Natal
    "2026-01-01"  // Ano Novo
];

form.addEventListener("submit", function(e){
    e.preventDefault();

    const dataInicio = dataInicioEl.value;
    const dataFim = dataFimEl.value;

    if(!dataInicio || !dataFim){
        alert("Tem que escolher uma data!");
        return;
    }

    if(dataFim < dataInicio){
        alert("A data de fim n√£o pode ser inferior √† data de in√≠cio!");
        return;
    }

    let inicio = new Date(dataInicio);
    let fim = new Date(dataFim);
    let contador = 0;

    // üî• Verifica√ß√£o de conflitos (data exata)
    while(inicio <= fim){
        const diaSemana = inicio.getDay();
        const formato = inicio.toISOString().split("T")[0];

        if(diaSemana === 0 || diaSemana === 6){
            alert(`A data ${formato} est√° em conflito (fim de semana)!`);
            return;
        }

        if(feriados.includes(formato)){
            alert(`A data ${formato} est√° em conflito (feriado)!`);
            return;
        }

        inicio.setDate(inicio.getDate() + 1);
    }

    // --- Se passou aqui, n√£o tem conflitos ---

    // Reset contador
    inicio = new Date(dataInicio);

    while(inicio <= fim){
        const diaSemana = inicio.getDay();
        const formato = inicio.toISOString().split("T")[0];

        if( diaSemana !== 0 && diaSemana !== 6 && !feriados.includes(formato) ){
            contador++;
        }

        inicio.setDate(inicio.getDate() + 1);
    }

    if(contador <= 0){
        alert("Tem que escolher um dia de semana!");
        return;
    }

    // üî• MENSAGEM FINAL DE ENVIO / SUBMISS√ÉO
    resultadoEl.textContent = 
        `De ${dataInicio} at√© ${dataFim} total de dias √∫teis ${contador}`;
});
</script>

</body>
</html>
